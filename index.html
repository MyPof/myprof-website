<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MyProfEduc - Cours Particuliers Simples et Efficaces</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700&family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <style>
        /* ... (le CSS reste inchangé) ... */
        
        /* Style pour l'upload de fichiers PDF */
        .file-upload-container {
            margin-top: 1rem;
        }
        
        .file-upload-label {
            display: block;
            padding: 1rem;
            border: 2px dashed #ccc;
            border-radius: 8px;
            text-align: center;
            cursor: pointer;
            transition: border-color 0.3s;
        }
        
        .file-upload-label:hover {
            border-color: var(--primary-color);
        }
        
        .file-upload-label i {
            font-size: 2rem;
            color: var(--primary-color);
            margin-bottom: 0.5rem;
        }
        
        .uploaded-files {
            margin-top: 1rem;
        }
        
        .uploaded-file {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 0.5rem;
            background-color: #f8f9fa;
            border-radius: 4px;
            margin-bottom: 0.5rem;
        }
        
        .file-name {
            flex-grow: 1;
            margin-right: 1rem;
        }
        
        .remove-file {
            color: var(--danger-color);
            cursor: pointer;
        }
    </style>
</head>
<body>
    <header id="header">
        <div class="container header-content">
            <a href="#" class="logo">
                <i class="fas fa-graduation-cap logo-icon"></i> MyProfEduc
            </a>
            <button class="mobile-menu-btn" id="mobileMenuBtn">
                <i class="fas fa-bars"></i>
            </button>
            <nav>
                <ul id="navMenu">
                    <li><a href="#home" class="active">Accueil</a></li>
                    <li><a href="#teachers">Trouver un enseignant</a></li>
                    <li><a href="#registration">Inscription</a></li>
                    <li><a href="#about">À propos</a></li>
                    <li><a href="#faq">FAQ</a></li>
                    <li id="loginNavItem"><a href="#" onclick="openLoginModal()">Connexion</a></li>
                    <li id="profileNavItem" style="display: none;"><a href="#profile">Mon profil</a></li>
                    <li id="editProfileNavItem" style="display: none;"><a href="#registration" onclick="showEditProfile()">Modifier mon profil</a></li>
                    <li id="logoutNavItem" style="display: none;"><a href="#" onclick="logout()">Déconnexion</a></li>
                </ul>
            </nav>
        </div>
    </header>

    <!-- ... (le reste du HTML reste inchangé jusqu'à la section d'inscription) ... -->

    <!-- Registration Section -->
    <section id="registration">
        <div class="container">
            <h2 class="section-title">Rejoignez-nous</h2>
            <p class="section-subtitle">Inscrivez-vous en tant qu'enseignant ou parent pour profiter de tous les avantages de notre plateforme.</p>
            
            <div class="tabs">
                <button class="tab-btn active" data-tab="teacher-register">Enseignant</button>
                <button class="tab-btn" data-tab="parent-register">Parent</button>
            </div>
            
            <div id="teacher-register" class="form-card active-tab">
                <h3>Inscription Enseignant</h3>
                <div class="photo-upload">
                    <img src="https://via.placeholder.com/150" alt="Photo de profil" class="profile-photo" id="teacherPhotoPreview">
                    <label for="teacherPhoto" class="photo-upload-btn">
                        <i class="fas fa-camera"></i> Ajouter une photo
                    </label>
                    <input type="file" id="teacherPhoto" accept="image/*" style="display: none;" onchange="previewTeacherPhoto(event)">
                </div>
                
                <div class="form-group">
                    <label for="teacherName">Nom complet</label>
                    <input type="text" id="teacherName" placeholder="Votre nom et prénom">
                </div>
                
                <div class="form-group">
                    <label for="teacherEmail">Email</label>
                    <input type="email" id="teacherEmail" placeholder="Votre adresse email">
                </div>
                
                <div class="form-group">
                    <label for="teacherPassword">Mot de passe</label>
                    <input type="password" id="teacherPassword" placeholder="Créez un mot de passe sécurisé">
                    <div class="password-validation">
                        <ul>
                            <li id="lengthValidation"><i class="fas fa-times"></i> Au moins 8 caractères</li>
                            <li id="uppercaseValidation"><i class="fas fa-times"></i> Au moins une majuscule</li>
                            <li id="numberValidation"><i class="fas fa-times"></i> Au moins un chiffre</li>
                            <li id="specialValidation"><i class="fas fa-times"></i> Au moins un caractère spécial</li>
                        </ul>
                        <div class="password-strength-bar">
                            <div class="strength" id="passwordStrength"></div>
                        </div>
                    </div>
                </div>
                
                <div class="form-group">
                    <label for="teacherConfirmPassword">Confirmer le mot de passe</label>
                    <input type="password" id="teacherConfirmPassword" placeholder="Confirmez votre mot de passe">
                </div>
                
                <div class="form-group">
                    <label>Matières enseignées</label>
                    <div class="tags-container" id="teacherSubjects"></div>
                    <div class="add-tag-form">
                        <input type="text" id="newSubject" placeholder="Ajouter une matière" class="add-tag-input">
                        <button class="btn btn-primary" onclick="addSubject()">Ajouter</button>
                    </div>
                </div>
                
                <div class="form-group">
                    <label>Télécharger vos diplômes (PDF uniquement)</label>
                    <div class="file-upload-container">
                        <label for="teacherDegreeFiles" class="file-upload-label">
                            <i class="fas fa-file-pdf"></i>
                            <p>Glissez-déposez vos fichiers PDF ici ou cliquez pour parcourir</p>
                            <small>Maximum 5 fichiers, 5MB chacun</small>
                        </label>
                        <input type="file" id="teacherDegreeFiles" accept=".pdf" multiple style="display: none;" onchange="handleDegreeUpload()">
                        <div class="uploaded-files" id="uploadedDegrees"></div>
                    </div>
                </div>
                
                <div class="form-group">
                    <label for="teacherCity">Ville</label>
                    <select id="teacherCity">
                        <option value="">Sélectionnez votre ville</option>
                        <!-- Les villes seront ajoutées dynamiquement -->
                    </select>
                </div>
                
                <div class="form-group">
                    <label for="teacherExperience">Années d'expérience</label>
                    <input type="number" id="teacherExperience" min="0" placeholder="Nombre d'années d'expérience">
                </div>
                
                <div class="form-group">
                    <label for="teacherRate">Tarif horaire (€)</label>
                    <input type="number" id="teacherRate" min="0" placeholder="Ex: 25">
                </div>
                
                <div class="form-group">
                    <label for="teacherBio">Présentation</label>
                    <textarea id="teacherBio" rows="4" placeholder="Présentez-vous en quelques lignes..."></textarea>
                </div>
                
                <button class="btn btn-primary" onclick="registerTeacher()">
                    <i class="fas fa-user-plus"></i> S'inscrire
                </button>
            </div>
            
            <div id="parent-register" class="form-card">
                <h3>Inscription Parent</h3>
                
                <div class="form-group">
                    <label for="parentName">Nom complet</label>
                    <input type="text" id="parentName" placeholder="Votre nom et prénom">
                </div>
                
                <div class="form-group">
                    <label for="parentEmail">Email</label>
                    <input type="email" id="parentEmail" placeholder="Votre adresse email">
                </div>
                
                <div class="form-group">
                    <label for="parentPassword">Mot de passe</label>
                    <input type="password" id="parentPassword" placeholder="Créez un mot de passe sécurisé">
                    <div class="password-validation">
                        <ul>
                            <li id="parentLengthValidation"><i class="fas fa-times"></i> Au moins 8 caractères</li>
                            <li id="parentUppercaseValidation"><i class="fas fa-times"></i> Au moins une majuscule</li>
                            <li id="parentNumberValidation"><i class="fas fa-times"></i> Au moins un chiffre</li>
                            <li id="parentSpecialValidation"><i class="fas fa-times"></i> Au moins un caractère spécial</li>
                        </ul>
                        <div class="password-strength-bar">
                            <div class="strength" id="parentPasswordStrength"></div>
                        </div>
                    </div>
                </div>
                
                <div class="form-group">
                    <label for="parentConfirmPassword">Confirmer le mot de passe</label>
                    <input type="password" id="parentConfirmPassword" placeholder="Confirmez votre mot de passe">
                </div>
                
                <div class="form-group">
                    <label for="childName">Nom complet de l'enfant</label>
                    <input type="text" id="childName" placeholder="Nom et prénom de votre enfant">
                </div>
                
                <div class="form-group">
                    <label for="childAge">Âge de l'enfant</label>
                    <input type="number" id="childAge" min="5" max="18" placeholder="Âge de votre enfant">
                </div>
                
                <div class="form-group">
                    <label for="childGrade">Niveau scolaire</label>
                    <select id="childGrade">
                        <option value="">Sélectionnez le niveau</option>
                        <option value="CP">CP</option>
                        <option value="CE1">CE1</option>
                        <option value="CE2">CE2</option>
                        <option value="CM1">CM1</option>
                        <option value="CM2">CM2</option>
                        <option value="6ème">6ème</option>
                        <option value="5ème">5ème</option>
                        <option value="4ème">4ème</option>
                        <option value="3ème">3ème</option>
                        <option value="2nde">2nde</option>
                        <option value="1ère">1ère</option>
                        <option value="Terminale">Terminale</option>
                    </select>
                </div>
                
                <div class="form-group">
                    <label for="childDifficulties">Description des difficultés rencontrées à l'école</label>
                    <textarea id="childDifficulties" rows="4" placeholder="Décrivez les difficultés scolaires de votre enfant..."></textarea>
                </div>
                
                <div class="form-group">
                    <label for="parentCity">Ville</label>
                    <select id="parentCity">
                        <option value="">Sélectionnez votre ville</option>
                        <!-- Les villes seront ajoutées dynamiquement -->
                    </select>
                </div>
                
                <button class="btn btn-primary" onclick="registerParent()">
                    <i class="fas fa-user-plus"></i> S'inscrire
                </button>
            </div>
        </div>
    </section>

    <!-- ... (le reste du HTML reste inchangé) ... -->

    <script>
        // Données des enseignants
        const teachers = [
            {
                id: 1,
                name: "Sophie Martin",
                subject: "Mathématiques",
                city: "Paris",
                experience: 5,
                rate: 25,
                rating: 4.8,
                reviews: 42,
                photo: "https://images.unsplash.com/photo-1544005313-94ddf0286df2?ixlib=rb-4.0.3&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=776&q=80",
                bio: "Diplômée d'un master en mathématiques, j'enseigne depuis 5 ans avec une approche pédagogique adaptée à chaque élève."
            },
            // ... (autres enseignants)
        ];

        // Liste des villes françaises (sélection des plus grandes)
        const frenchCities = [
            "Paris", "Marseille", "Lyon", "Toulouse", "Nice", "Nantes", "Strasbourg", "Montpellier", "Bordeaux", "Lille",
            "Rennes", "Reims", "Le Havre", "Saint-Étienne", "Toulon", "Grenoble", "Dijon", "Angers", "Nîmes", "Villeurbanne"
        ];

        // Variable pour suivre l'état de connexion
        let isLoggedIn = false;
        let currentUser = null;

        // Fonction pour basculer entre les onglets d'inscription (CORRIGÉE)
        function showTab(tabId) {
            // Cacher tous les contenus d'onglets
            document.querySelectorAll('.form-card').forEach(tab => {
                tab.classList.remove('active-tab');
                tab.style.display = 'none';
            });
            
            // Désactiver tous les boutons d'onglets
            document.querySelectorAll('.tab-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            
            // Afficher l'onglet sélectionné
            document.getElementById(tabId).style.display = 'block';
            document.getElementById(tabId).classList.add('active-tab');
            
            // Activer le bouton correspondant
            document.querySelector(`.tab-btn[data-tab="${tabId}"]`).classList.add('active');
        }

        // Gestionnaire d'événements pour les onglets
        document.querySelectorAll('.tab-btn').forEach(button => {
            button.addEventListener('click', function() {
                showTab(this.getAttribute('data-tab'));
            });
        });

        // Fonction pour gérer l'upload des diplômes
        function handleDegreeUpload() {
            const fileInput = document.getElementById('teacherDegreeFiles');
            const uploadedFilesContainer = document.getElementById('uploadedDegrees');
            const files = fileInput.files;
            
            uploadedFilesContainer.innerHTML = '';
            
            if (files.length > 0) {
                for (let i = 0; i < files.length; i++) {
                    const file = files[i];
                    
                    // Vérifier si le fichier est un PDF
                    if (file.type !== 'application/pdf') {
                        alert('Veuillez uploader uniquement des fichiers PDF.');
                        continue;
                    }
                    
                    // Vérifier la taille du fichier (max 5MB)
                    if (file.size > 5 * 1024 * 1024) {
                        alert(`Le fichier ${file.name} dépasse la taille maximale de 5MB.`);
                        continue;
                    }
                    
                    const fileElement = document.createElement('div');
                    fileElement.className = 'uploaded-file';
                    fileElement.innerHTML = `
                        <span class="file-name">${file.name}</span>
                        <span class="remove-file" onclick="removeUploadedFile(${i})">
                            <i class="fas fa-times"></i>
                        </span>
                    `;
                    
                    uploadedFilesContainer.appendChild(fileElement);
                }
            }
        }

        // Fonction pour supprimer un fichier uploadé
        function removeUploadedFile(index) {
            const fileInput = document.getElementById('teacherDegreeFiles');
            const dt = new DataTransfer();
            const files = fileInput.files;
            
            // Recréer la liste des fichiers sans le fichier à supprimer
            for (let i = 0; i < files.length; i++) {
                if (i !== index) {
                    dt.items.add(files[i]);
                }
            }
            
            fileInput.files = dt.files;
            handleDegreeUpload(); // Mettre à jour l'affichage
        }

        // Fonction pour afficher le formulaire d'édition de profil
        function showEditProfile() {
            if (!isLoggedIn) {
                alert('Veuillez vous connecter pour modifier votre profil.');
                openLoginModal();
                return;
            }
            
            // Basculer vers l'onglet d'inscription enseignant
            showTab('teacher-register');
            
            // Pré-remplir le formulaire avec les données de l'utilisateur
            if (currentUser && currentUser.type === 'teacher') {
                document.getElementById('teacherName').value = currentUser.name || '';
                document.getElementById('teacherEmail').value = currentUser.email || '';
                document.getElementById('teacherCity').value = currentUser.city || '';
                document.getElementById('teacherExperience').value = currentUser.experience || '';
                document.getElementById('teacherRate').value = currentUser.rate || '';
                document.getElementById('teacherBio').value = currentUser.bio || '';
                
                // Pré-remplir les matières
                const subjectsContainer = document.getElementById('teacherSubjects');
                subjectsContainer.innerHTML = '';
                if (currentUser.subjects) {
                    currentUser.subjects.forEach(subject => {
                        const tag = document.createElement('div');
                        tag.className = 'tag';
                        tag.innerHTML = `
                            ${subject}
                            <span class="tag-remove" onclick="this.parentElement.remove()">
                                <i class="fas fa-times"></i>
                            </span>
                        `;
                        subjectsContainer.appendChild(tag);
                    });
                }
            }
            
            // Faire défiler jusqu'au formulaire
            document.getElementById('registration').scrollIntoView({ behavior: 'smooth' });
        }

        // Fonction pour se connecter (MODIFIÉE)
        function login() {
            const email = document.getElementById('loginEmail').value;
            const password = document.getElementById('loginPassword').value;
            
            if (!email || !password) {
                alert('Veuillez entrer votre email et mot de passe.');
                return;
            }
            
            // Simulation de connexion réussie
            isLoggedIn = true;
            currentUser = {
                name: "Utilisateur MyProfEduc",
                email: email,
                type: "teacher" // ou "parent" selon le cas
            };
            
            document.getElementById('loginNavItem').style.display = 'none';
            document.getElementById('profileNavItem').style.display = 'list-item';
            document.getElementById('editProfileNavItem').style.display = 'list-item';
            document.getElementById('logoutNavItem').style.display = 'list-item';
            
            closeLoginModal();
            showProfile();
        }

        // Fonction pour se déconnecter (MODIFIÉE)
        function logout() {
            isLoggedIn = false;
            currentUser = null;
            
            document.getElementById('loginNavItem').style.display = 'list-item';
            document.getElementById('profileNavItem').style.display = 'none';
            document.getElementById('editProfileNavItem').style.display = 'none';
            document.getElementById('logoutNavItem').style.display = 'none';
            
            document.getElementById('profile').style.display = 'none';
            document.getElementById('registration').style.display = 'block';
        }

        // Fonction pour enregistrer un parent (MODIFIÉE)
        function registerParent() {
            const name = document.getElementById('parentName').value;
            const email = document.getElementById('parentEmail').value;
            const password = document.getElementById('parentPassword').value;
            const confirmPassword = document.getElementById('parentConfirmPassword').value;
            const childName = document.getElementById('childName').value;
            const childAge = document.getElementById('childAge').value;
            const childGrade = document.getElementById('childGrade').value;
            const childDifficulties = document.getElementById('childDifficulties').value;
            const city = document.getElementById('parentCity').value;
            
            // Validation basique
            if (!name || !email || !password || !confirmPassword || !childName || !childAge || !childGrade || !city) {
                alert('Veuillez remplir tous les champs obligatoires.');
                return;
            }
            
            if (password !== confirmPassword) {
                alert('Les mots de passe ne correspondent pas.');
                return;
            }
            
            if (!validatePassword(password, 'parent')) {
                alert('Le mot de passe ne respecte pas les critères de sécurité.');
                return;
            }
            
            // Simulation d'enregistrement réussi
            document.getElementById('registration').style.display = 'none';
            document.getElementById('verification').style.display = 'block';
            
            // Réinitialiser le formulaire
            document.getElementById('parent-register').reset();
        }

        // Initialisation au chargement de la page (MODIFIÉE)
        document.addEventListener('DOMContentLoaded', function() {
            // Afficher les enseignants
            renderTeachers(teachers);
            
            // Remplir les listes déroulantes des villes
            populateCityDropdowns();
            
            // Configurer la validation des mots de passe
            document.getElementById('teacherPassword').addEventListener('input', function() {
                validatePassword(this.value);
            });
            
            document.getElementById('parentPassword').addEventListener('input', function() {
                validatePassword(this.value, 'parent');
            });
            
            // Animation des statistiques
            animateValue('teacherCount', 0, 20025, 2000);
            animateValue('parentCount', 0, 45120, 2000);
            animateValue('studentCount', 0, 78356, 2000);
            
            // Afficher le premier onglet par défaut
            showTab('teacher-register');
        });

        // ... (le reste des fonctions reste inchangé) ...
    </script>
</body>
</html>
