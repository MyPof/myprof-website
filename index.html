<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MyProfEduc - Cours Particuliers Simples et Efficaces</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700&family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <style>
        /* ... (le CSS reste inchangé) ... */
    </style>
</head>
<body>
    <!-- ... (le HTML reste inchangé jusqu'à la section profile) ... -->

    <!-- Profile Section -->
    <section id="profile">
        <div class="container">
            <div class="profile-tabs">
                <button class="profile-tab-btn active" onclick="showProfileTab('profile-info')">Informations</button>
                <button class="profile-tab-btn" onclick="showProfileTab('profile-children')">Mes enfants</button>
                <button class="profile-tab-btn" onclick="showProfileTab('profile-bookings')">Réservations</button>
            </div>
            
            <div id="profile-info" class="profile-content active">
                <div class="form-card">
                    <h3>Mon Profil</h3>
                    <div id="profileContent"></div>
                    <!-- Ajout du bouton Modifier le profil -->
                    <button class="btn btn-secondary" onclick="showEditProfile()">Modifier mon profil</button>
                </div>
            </div>
            
            <div id="profile-children" class="profile-content">
                <div class="form-card">
                    <h3>Mes Enfants</h3>
                    <button class="btn btn-primary" onclick="openAddChildModal()">
                        <i class="fas fa-plus"></i> Ajouter un enfant
                    </button>
                    <div class="children-list" id="childrenList"></div>
                </div>
            </div>
            
            <div id="profile-bookings" class="profile-content">
                <div class="form-card">
                    <h3>Mes Réservations</h3>
                    <p>Vous n'avez aucune réservation pour le moment.</p>
                </div>
            </div>
        </div>
    </section>

    <!-- Login Modal -->
    <div id="loginModal" class="modal">
        <div class="modal-content">
            <button class="modal-close" onclick="closeLoginModal()">&times;</button>
            <h3>Connexion</h3>
            <div class="form-group">
                <label for="loginEmail">Email</label>
                <input type="email" id="loginEmail" placeholder="Votre adresse email">
            </div>
            <div class="form-group">
                <label for="loginPassword">Mot de passe</label>
                <input type="password" id="loginPassword" placeholder="Votre mot de passe">
            </div>
            <!-- Ajout du lien "Mot de passe oublié" -->
            <p style="margin-top: 1rem;">
                <a href="#" onclick="forgotPassword()">J'ai oublié mon mot de passe</a>
            </p>
            <button class="btn btn-primary" onclick="login()">Se connecter</button>
            <p style="margin-top: 1rem;">Pas encore inscrit ? <a href="#registration" onclick="closeLoginModal()">Créer un compte</a></p>
        </div>
    </div>

    <!-- ... (le reste du HTML reste inchangé) ... -->

    <script>
        // Données des enseignants
        const teachers = [
            {
                id: 1,
                name: "Sophie Martin",
                subject: "Mathématiques",
                city: "Paris",
                experience: 5,
                rate: 25,
                rating: 4.8,
                reviews: 42,
                photo: "https://images.unsplash.com/photo-1544005313-94ddf0286df2?ixlib=rb-4.0.3&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=776&q=80",
                bio: "Diplômée d'un master en mathématiques, j'enseigne depuis 5 ans avec une approche pédagogique adaptée à chaque élève."
            },
            // ... (autres enseignants)
        ];

        // Liste des villes françaises (sélection des plus grandes)
        const frenchCities = [
            "Paris", "Marseille", "Lyon", "Toulouse", "Nice", "Nantes", "Strasbourg", "Montpellier", "Bordeaux", "Lille",
            "Rennes", "Reims", "Le Havre", "Saint-Étienne", "Toulon", "Grenoble", "Dijon", "Angers", "Nîmes", "Villeurbanne"
        ];

        // Variable pour stocker le profil utilisateur actuel
        let currentUser = null;

        // Fonction pour afficher les enseignants
        function renderTeachers(teachersToRender) {
            const teacherList = document.getElementById('teacherList');
            teacherList.innerHTML = '';
            
            if (teachersToRender.length === 0) {
                teacherList.innerHTML = '<div class="text-center" style="grid-column: 1/-1; padding: 2rem;">Aucun enseignant ne correspond à vos critères de recherche.</div>';
                return;
            }
            
            teachersToRender.forEach(teacher => {
                const stars = '★'.repeat(Math.floor(teacher.rating)) + '☆'.repeat(5 - Math.floor(teacher.rating));
                
                const teacherCard = document.createElement('div');
                teacherCard.className = 'teacher-card';
                teacherCard.innerHTML = `
                    <div class="teacher-badge">
                        <span class="badge badge-primary">Disponible</span>
                    </div>
                    <div class="teacher-photo-container">
                        <img src="${teacher.photo}" alt="${teacher.name}" class="teacher-photo">
                        <div class="teacher-overlay">
                            <h3 class="teacher-name">${teacher.name}</h3>
                            <p class="teacher-subject">${teacher.subject}</p>
                        </div>
                    </div>
                    <div class="teacher-info">
                        <div class="teacher-details">
                            <i class="fas fa-map-marker-alt"></i>
                            <span>${teacher.city}</span>
                        </div>
                        <div class="teacher-details">
                            <i class="fas fa-briefcase"></i>
                            <span>${teacher.experience} ans d'expérience</span>
                        </div>
                        <div class="teacher-rating">
                            <span class="stars">${stars}</span>
                            <span>${teacher.rating} (${teacher.reviews} avis)</span>
                        </div>
                        <p>${teacher.bio}</p>
                        <div class="price">${teacher.rate}€/h</div>
                        <button class="btn btn-primary" onclick="contactTeacher(${teacher.id})">
                            <i class="fas fa-envelope"></i> Contacter
                        </button>
                    </div>
                `;
                
                teacherList.appendChild(teacherCard);
            });
        }

        // Fonction pour afficher le formulaire d'édition de profil
        function showEditProfile() {
            // Remplir le formulaire avec les données actuelles
            document.getElementById('teacherName').value = currentUser.name;
            document.getElementById('teacherEmail').value = currentUser.email;
            document.getElementById('teacherCity').value = currentUser.city;
            document.getElementById('teacherExperience').value = currentUser.experience;
            document.getElementById('teacherRate').value = currentUser.rate;
            document.getElementById('teacherBio').value = currentUser.bio;
            
            // Afficher les matières enseignées
            const subjectsContainer = document.getElementById('teacherSubjects');
            subjectsContainer.innerHTML = '';
            currentUser.subjects.forEach(subject => {
                const tag = document.createElement('div');
                tag.className = 'tag';
                tag.innerHTML = `
                    ${subject}
                    <span class="tag-remove" onclick="this.parentElement.remove()">
                        <i class="fas fa-times"></i>
                    </span>
                `;
                subjectsContainer.appendChild(tag);
            });
            
            // Basculer vers l'onglet d'inscription enseignant
            showTab('teacher-register');
            
            // Faire défiler jusqu'au formulaire
            document.getElementById('registration').scrollIntoView({ behavior: 'smooth' });
        }

        // Fonction pour enregistrer un enseignant (modifiée)
        function registerTeacher() {
            const name = document.getElementById('teacherName').value;
            const email = document.getElementById('teacherEmail').value;
            const password = document.getElementById('teacherPassword').value;
            const confirmPassword = document.getElementById('teacherConfirmPassword').value;
            const city = document.getElementById('teacherCity').value;
            const experience = document.getElementById('teacherExperience').value;
            const rate = document.getElementById('teacherRate').value;
            const bio = document.getElementById('teacherBio').value;
            
            // Validation basique
            if (!name || !email || !password || !confirmPassword || !city || !experience || !rate || !bio) {
                alert('Veuillez remplir tous les champs obligatoires.');
                return;
            }
            
            if (password !== confirmPassword) {
                alert('Les mots de passe ne correspondent pas.');
                return;
            }
            
            if (!validatePassword(password)) {
                alert('Le mot de passe ne respecte pas les critères de sécurité.');
                return;
            }
            
            // Récupérer les matières
            const subjects = Array.from(document.getElementById('teacherSubjects').querySelectorAll('.tag'))
                .map(tag => tag.textContent.replace('×', '').trim());
            
            if (subjects.length === 0) {
                alert('Veuillez ajouter au moins une matière.');
                return;
            }
            
            // Récupérer la photo
            const photoFile = document.getElementById('teacherPhoto').files[0];
            let photoUrl = "https://via.placeholder.com/150";
            
            if (photoFile) {
                // En production, il faudrait uploader l'image sur un serveur
                photoUrl = URL.createObjectURL(photoFile);
            }
            
            // Créer le nouvel enseignant
            const newTeacher = {
                id: teachers.length + 1,
                name: name,
                subject: subjects.join(', '),
                city: city,
                experience: parseInt(experience),
                rate: parseInt(rate),
                rating: 4.5, // Note par défaut
                reviews: 0,   // Aucun avis initialement
                photo: photoUrl,
                bio: bio
            };
            
            // Ajouter le nouvel enseignant à la liste
            teachers.push(newTeacher);
            
            // Mettre à jour l'affichage
            renderTeachers(teachers);
            
            // Définir comme utilisateur courant
            currentUser = {
                name: name,
                email: email,
                city: city,
                experience: experience,
                rate: rate,
                bio: bio,
                subjects: subjects,
                type: 'teacher'
            };
            
            // Afficher le message de succès
            document.getElementById('registration').style.display = 'none';
            document.getElementById('verification').style.display = 'block';
            
            // Mettre à jour la navigation
            document.getElementById('loginNavItem').style.display = 'none';
            document.getElementById('profileNavItem').style.display = 'list-item';
            document.getElementById('logoutNavItem').style.display = 'list-item';
            
            // Réinitialiser le formulaire
            document.getElementById('teacher-register').reset();
            document.getElementById('teacherSubjects').innerHTML = '';
            document.getElementById('teacherPhotoPreview').src = 'https://via.placeholder.com/150';
        }

        // Fonction pour le mot de passe oublié
        function forgotPassword() {
            const email = document.getElementById('loginEmail').value;
            
            if (!email) {
                alert('Veuillez entrer votre adresse email pour réinitialiser votre mot de passe.');
                return;
            }
            
            alert(`Un lien de réinitialisation a été envoyé à ${email} (simulation).`);
            closeLoginModal();
        }

        // ... (le reste des fonctions reste inchangé) ...

        // Initialisation au chargement de la page
        document.addEventListener('DOMContentLoaded', function() {
            // Afficher les enseignants
            renderTeachers(teachers);
            
            // Remplir les listes déroulantes des villes
            populateCityDropdowns();
            
            // Configurer la validation des mots de passe
            document.getElementById('teacherPassword').addEventListener('input', function() {
                validatePassword(this.value);
            });
            
            document.getElementById('parentPassword').addEventListener('input', function() {
                validatePassword(this.value, 'parent');
            });
            
            // Animation des statistiques
            animateValue('teacherCount', 0, 20025, 2000);
            animateValue('parentCount', 0, 45120, 2000);
            animateValue('studentCount', 0, 78356, 2000);
        });

        // ... (le reste du code JavaScript reste inchangé) ...
    </script>
</body>
</html>
