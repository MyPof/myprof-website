<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MyProfEduc - Cours Particuliers Simples et Efficaces</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700&family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <style>
        /* ... (mets ici ton CSS d'origine, inchangé) ... */
    </style>
</head>
<body>
    <header id="header">
        <div class="container header-content">
            <a href="#" class="logo">
                <i class="fas fa-graduation-cap logo-icon"></i> MyProfEduc
            </a>
            <button class="mobile-menu-btn" id="mobileMenuBtn">
                <i class="fas fa-bars"></i>
            </button>
            <nav>
                <ul id="navMenu">
                    <li><a href="#home" class="active">Accueil</a></li>
                    <li><a href="#teachers">Trouver un enseignant</a></li>
                    <li><a href="#registration">Inscription</a></li>
                    <li><a href="#about">À propos</a></li>
                    <li><a href="#faq">FAQ</a></li>
                    <li id="loginNavItem"><a href="#" onclick="openLoginModal()">Connexion</a></li>
                    <li id="profileNavItem" style="display: none;"><a href="#profile">Mon profil</a></li>
                    <li id="logoutNavItem" style="display: none;"><a href="#" onclick="logout()">Déconnexion</a></li>
                </ul>
            </nav>
        </div>
    </header>

    <!-- ... (ton contenu sections HERO, teachers, home, etc, inchangé) ... -->

    <!-- Section d'inscription (ne pas oublier de remettre l'input type="file" pour photo et diplômes si utile) -->
    <section id="registration">
        <div class="container">
            <h2 class="section-title">Rejoignez-nous</h2>
            <p class="section-subtitle">Inscrivez-vous en tant qu'enseignant ou parent pour profiter de tous les avantages de notre plateforme.</p>
            <div class="tabs">
                <button class="tab-btn active" onclick="showTab('teacher-register')">Enseignant</button>
                <button class="tab-btn" onclick="showTab('parent-register')">Parent</button>
            </div>
            <div id="teacher-register" class="form-card">
                <h3>Inscription Enseignant</h3>
                <div class="photo-upload">
                    <img src="https://via.placeholder.com/150" alt="Photo de profil" class="profile-photo" id="teacherPhotoPreview">
                    <label for="teacherPhoto" class="photo-upload-btn">
                        <i class="fas fa-camera"></i> Ajouter une photo
                    </label>
                    <input type="file" id="teacherPhoto" accept="image/*" style="display: none;" onchange="previewTeacherPhoto(event)">
                </div>
                <div class="form-group">
                    <label for="teacherName">Nom complet</label>
                    <input type="text" id="teacherName" placeholder="Votre nom et prénom">
                </div>
                <div class="form-group">
                    <label for="teacherEmail">Email</label>
                    <input type="email" id="teacherEmail" placeholder="Votre adresse email">
                </div>
                <div class="form-group">
                    <label for="teacherPassword">Mot de passe</label>
                    <input type="password" id="teacherPassword" placeholder="Créez un mot de passe sécurisé">
                    <div class="password-validation">
                        <ul>
                            <li id="lengthValidation"><i class="fas fa-times"></i> Au moins 8 caractères</li>
                            <li id="uppercaseValidation"><i class="fas fa-times"></i> Au moins une majuscule</li>
                            <li id="numberValidation"><i class="fas fa-times"></i> Au moins un chiffre</li>
                            <li id="specialValidation"><i class="fas fa-times"></i> Au moins un caractère spécial</li>
                        </ul>
                        <div class="password-strength-bar">
                            <div class="strength" id="passwordStrength"></div>
                        </div>
                    </div>
                </div>
                <div class="form-group">
                    <label for="teacherConfirmPassword">Confirmer le mot de passe</label>
                    <input type="password" id="teacherConfirmPassword" placeholder="Confirmez votre mot de passe">
                </div>
                <div class="form-group">
                    <label>Matières enseignées</label>
                    <div class="tags-container" id="teacherSubjects"></div>
                    <div class="add-tag-form">
                        <input type="text" id="newSubject" placeholder="Ajouter une matière" class="add-tag-input">
                        <button class="btn btn-primary" type="button" onclick="addSubject()">Ajouter</button>
                    </div>
                </div>
                <div class="form-group">
                    <label>Diplômes</label>
                    <div class="tags-container" id="teacherDegrees"></div>
                    <div class="add-tag-form">
                        <input type="text" id="newDegree" placeholder="Ajouter un diplôme" class="add-tag-input">
                        <button class="btn btn-primary" type="button" onclick="addDegree()">Ajouter</button>
                    </div>
                </div>
                <div class="form-group">
                    <label for="teacherCity">Ville</label>
                    <select id="teacherCity">
                        <option value="">Sélectionnez votre ville</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="teacherExperience">Années d'expérience</label>
                    <input type="number" id="teacherExperience" min="0" placeholder="Nombre d'années d'expérience">
                </div>
                <div class="form-group">
                    <label for="teacherRate">Tarif horaire (€)</label>
                    <input type="number" id="teacherRate" min="0" placeholder="Ex: 25">
                </div>
                <div class="form-group">
                    <label for="teacherBio">Présentation</label>
                    <textarea id="teacherBio" rows="4" placeholder="Présentez-vous en quelques lignes..."></textarea>
                </div>
                <button class="btn btn-primary" type="button" onclick="registerTeacher()">
                    <i class="fas fa-user-plus"></i> S'inscrire
                </button>
            </div>
            <div id="parent-register" class="form-card" style="display: none;">
                <!-- (Formulaire parent inchangé) -->
            </div>
        </div>
    </section>

    <!-- Section Profile -->
    <section id="profile" style="display:none;">
        <div class="container">
            <div class="profile-tabs">
                <button class="profile-tab-btn active" onclick="showProfileTab('profile-info')">Informations</button>
                <button class="profile-tab-btn" onclick="showProfileTab('profile-children')">Mes enfants</button>
                <button class="profile-tab-btn" onclick="showProfileTab('profile-bookings')">Réservations</button>
            </div>
            <div id="profile-info" class="profile-content active">
                <div class="form-card">
                    <h3>Mon Profil</h3>
                    <div id="profileContent"></div>
                </div>
            </div>
            <div id="profile-children" class="profile-content">
                <div class="form-card">
                    <h3>Mes Enfants</h3>
                    <button class="btn btn-primary" onclick="openAddChildModal()"><i class="fas fa-plus"></i> Ajouter un enfant</button>
                    <div class="children-list" id="childrenList"></div>
                </div>
            </div>
            <div id="profile-bookings" class="profile-content">
                <div class="form-card">
                    <h3>Mes Réservations</h3>
                    <p>Vous n'avez aucune réservation pour le moment.</p>
                </div>
            </div>
        </div>
    </section>

    <!-- Modals et footer : inchangés / à reprendre -->

    <script>
    // --- DONNÉES ---
    let teachers = [
        {
            id: 1,
            email: "sophie@demo.fr",
            name: "Sophie Martin",
            subject: "Mathématiques",
            city: "Paris",
            experience: 5,
            rate: 25,
            rating: 4.8,
            reviews: 42,
            photo: "https://images.unsplash.com/photo-1544005313-94ddf0286df2?ixlib=rb-4.0.3&auto=format&fit=crop&w=776&q=80",
            bio: "Diplômée d'un master en mathématiques, j'enseigne depuis 5 ans avec une approche pédagogique adaptée à chaque élève.",
            subjects: ["Mathématiques"],
            degrees: ["Master Mathématiques"]
        },
        // ...(autres enseignants initiaux)...
    ];
    const frenchCities = [
        "Paris", "Marseille", "Lyon", "Toulouse", "Nice", "Nantes", "Strasbourg", "Montpellier", "Bordeaux", "Lille",
        "Rennes", "Reims", "Le Havre", "Saint-Étienne", "Toulon", "Grenoble", "Dijon", "Angers", "Nîmes", "Villeurbanne"
    ];

    let loggedTeacherIndex = null; // index dans le tableau teachers

    // --- AFFICHAGE ENSEIGNANTS ---
    function renderTeachers(teachersToRender) {
        const teacherList = document.getElementById('teacherList');
        teacherList.innerHTML = '';
        if (!teachersToRender || teachersToRender.length === 0) {
            teacherList.innerHTML = '<div class="text-center" style="grid-column: 1/-1; padding: 2rem;">Aucun enseignant ne correspond à vos critères de recherche.</div>';
            return;
        }
        teachersToRender.forEach(teacher => {
            const stars = '★'.repeat(Math.round(teacher.rating || 0)) + '☆'.repeat(5 - Math.round(teacher.rating || 0));
            teacherList.innerHTML += `
                <div class="teacher-card">
                    <div class="teacher-badge">
                        <span class="badge badge-primary">Disponible</span>
                    </div>
                    <div class="teacher-photo-container">
                        <img src="${teacher.photo}" alt="${teacher.name}" class="teacher-photo">
                        <div class="teacher-overlay">
                            <h3 class="teacher-name">${teacher.name}</h3>
                            <p class="teacher-subject">${(teacher.subjects && teacher.subjects.join ? teacher.subjects.join(', ') : teacher.subject) || ""}</p>
                        </div>
                    </div>
                    <div class="teacher-info">
                        <div class="teacher-details"><i class="fas fa-map-marker-alt"></i><span>${teacher.city}</span></div>
                        <div class="teacher-details"><i class="fas fa-briefcase"></i><span>${teacher.experience} ans d'expérience</span></div>
                        <div class="teacher-rating">
                            <span class="stars">${stars}</span>
                            <span>${teacher.rating ? teacher.rating.toFixed(1) : "5.0"} (${teacher.reviews || 0} avis)</span>
                        </div>
                        <p>${teacher.bio}</p>
                        <div class="price">${teacher.rate}€/h</div>
                        <button class="btn btn-primary" onclick="contactTeacher(${teacher.id})">
                            <i class="fas fa-envelope"></i> Contacter
                        </button>
                    </div>
                </div>
            `;
        });
    }

    // --- INSCRIPTION ENSEIGNANT ---
    function registerTeacher() {
        const name = document.getElementById('teacherName').value;
        const email = document.getElementById('teacherEmail').value;
        const password = document.getElementById('teacherPassword').value;
        const confirmPassword = document.getElementById('teacherConfirmPassword').value;
        const city = document.getElementById('teacherCity').value;
        const experience = document.getElementById('teacherExperience').value;
        const rate = document.getElementById('teacherRate').value;
        const bio = document.getElementById('teacherBio').value;
        const photoUrl = document.getElementById('teacherPhotoPreview').src;
        if (!name || !email || !password || !confirmPassword || !city || !experience || !rate || !bio)
            return alert('Veuillez remplir tous les champs obligatoires.');
        if (password !== confirmPassword)
            return alert('Les mots de passe ne correspondent pas.');
        if (!validatePassword(password))
            return alert('Le mot de passe ne respecte pas les critères de sécurité.');
        const subjects = Array.from(document.getElementById('teacherSubjects').querySelectorAll('.tag'))
            .map(tag => tag.childNodes[0].textContent.trim());
        if (subjects.length === 0)
            return alert('Veuillez ajouter au moins une matière.');
        const degrees = Array.from(document.getElementById('teacherDegrees').querySelectorAll('.tag'))
            .map(tag => tag.childNodes[0].textContent.trim());
        // Ajout dans la liste globale
        const newTeacher = {
            id: teachers.length ? Math.max(...teachers.map(t => t.id)) + 1 : 1,
            name,
            email,
            password,
            city,
            experience: parseInt(experience),
            rate: parseInt(rate),
            rating: 5,
            reviews: 0,
            photo: (photoUrl && !photoUrl.includes('placeholder.com')) ? photoUrl : "https://via.placeholder.com/150",
            bio,
            subjects,
            degrees,
            subject: subjects[0] || ""
        };
        teachers.push(newTeacher);
        loggedTeacherIndex = teachers.length - 1;
        renderTeachers(teachers);
        document.getElementById('registration').style.display = 'none';
        document.getElementById('verification').style.display = 'block';
        document.getElementById('teacher-register').reset();
        document.getElementById('teacherSubjects').innerHTML = '';
        document.getElementById('teacherDegrees').innerHTML = '';
        document.getElementById('teacherPhotoPreview').src = 'https://via.placeholder.com/150';
        showProfile();
    }

    // --- PROFIL ET ÉDITION ---
    function showProfile() {
        document.getElementById('registration').style.display = 'none';
        document.getElementById('verification').style.display = 'none';
        document.getElementById('profile').style.display = 'block';
        if (loggedTeacherIndex !== null && teachers[loggedTeacherIndex]) {
            const t = teachers[loggedTeacherIndex];
            document.getElementById('profileContent').innerHTML = `
                <div class="photo-upload">
                    <img src="${t.photo}" alt="Photo de profil" class="profile-photo" id="editPhotoPreview">
                    <label for="editPhoto" class="photo-upload-btn">
                        <i class="fas fa-camera"></i> Changer la photo
                    </label>
                    <input type="file" id="editPhoto" accept="image/*" style="display: none;" onchange="editPhotoChange(event)">
                </div>
                <div class="form-group"><label>Nom</label>
                    <input type="text" id="editName" value="${t.name}"></div>
                <div class="form-group"><label>Ville</label>
                    <select id="editCity"></select></div>
                <div class="form-group"><label>Matières</label>
                    <input type="text" id="editSubjects" value="${(t.subjects && t.subjects.join(', ')) || ''}"></div>
                <div class="form-group"><label>Diplômes</label>
                    <input type="text" id="editDegrees" value="${(t.degrees && t.degrees.join(', ')) || ''}"></div>
                <div class="form-group"><label>Expérience (années)</label>
                    <input type="number" id="editExperience" value="${t.experience}"></div>
                <div class="form-group"><label>Tarif (€ /h)</label>
                    <input type="number" id="editRate" value="${t.rate}"></div>
                <div class="form-group"><label>Présentation</label>
                    <textarea id="editBio" rows="3">${t.bio}</textarea></div>
                <button class="btn btn-primary" onclick="saveProfile()">Enregistrer</button>
            `;
            // Remplir select villes
            const sel = document.getElementById('editCity');
            sel.innerHTML = frenchCities.map(city => `<option value="${city}" ${city === t.city ? 'selected' : ''}>${city}</option>`).join('');
            // gestion image profil
            document.getElementById('editPhoto').addEventListener('change', editPhotoChange);
        }
    }

    function saveProfile() {
        const t = teachers[loggedTeacherIndex];
        t.name = document.getElementById('editName').value;
        t.city = document.getElementById('editCity').value;
        t.subjects = document.getElementById('editSubjects').value.split(',').map(s=>s.trim()).filter(Boolean);
        t.subject = t.subjects[0] || "";
        t.degrees = document.getElementById('editDegrees').value.split(',').map(s=>s.trim()).filter(Boolean);
        t.experience = parseInt(document.getElementById('editExperience').value) || 0;
        t.rate = parseInt(document.getElementById('editRate').value) || 0;
        t.bio = document.getElementById('editBio').value;
        if(document.getElementById('editPhotoPreview') && document.getElementById('editPhotoPreview').src)
            t.photo = document.getElementById('editPhotoPreview').src;
        renderTeachers(teachers);
        showProfile();
    }

    function editPhotoChange(event) {
        const reader = new FileReader();
        reader.onload = function() {
            document.getElementById('editPhotoPreview').src = reader.result;
        };
        reader.readAsDataURL(event.target.files[0]);
    }

    // --- LOGIN/LOGOUT ---
    function login() {
        const email = document.getElementById('loginEmail').value;
        const password = document.getElementById('loginPassword').value;
        // Recherche l'enseignant par mail et mot de passe
        const ix = teachers.findIndex(t => t.email === email && (!t.password || t.password === password));
        if (ix === -1) return alert("Identifiants incorrects");
        loggedTeacherIndex = ix;
        document.getElementById('loginNavItem').style.display = 'none';
        document.getElementById('profileNavItem').style.display = 'list-item';
        document.getElementById('logoutNavItem').style.display = 'list-item';
        closeLoginModal();
        showProfile();
    }
    function logout() {
        document.getElementById('loginNavItem').style.display = 'list-item';
        document.getElementById('profileNavItem').style.display = 'none';
        document.getElementById('logoutNavItem').style.display = 'none';
        document.getElementById('profile').style.display = 'none';
        document.getElementById('registration').style.display = 'block';
        loggedTeacherIndex = null;
    }

    // --- UTILITAIRES ---
    function addSubject() {
        const subjectInput = document.getElementById('newSubject');
        const subject = subjectInput.value.trim();
        if (subject) {
            const tagsContainer = document.getElementById('teacherSubjects');
            const tag = document.createElement('div');
            tag.className = 'tag';
            tag.innerHTML = `
                ${subject}
                <span class="tag-remove" onclick="this.parentElement.remove()"><i class="fas fa-times"></i></span>
            `;
            tagsContainer.appendChild(tag);
            subjectInput.value = '';
        }
    }
    function addDegree() {
        const degreeInput = document.getElementById('newDegree');
        const degree = degreeInput.value.trim();
        if (degree) {
            const tagsContainer = document.getElementById('teacherDegrees');
            const tag = document.createElement('div');
            tag.className = 'tag';
            tag.innerHTML = `
                ${degree}
                <span class="tag-remove" onclick="this.parentElement.remove()"><i class="fas fa-times"></i></span>
            `;
            tagsContainer.appendChild(tag);
            degreeInput.value = '';
        }
    }
    function previewTeacherPhoto(event) {
        const reader = new FileReader();
        reader.onload = function() {
            document.getElementById('teacherPhotoPreview').src = reader.result;
        };
        reader.readAsDataURL(event.target.files[0]);
    }
    function validatePassword(password, prefix = '') {
        // Mets ici ta routine habituelle de validation sécurité de mot de passe
        return password.length >= 8 && /[A-Z]/.test(password) && /\d/.test(password) && /[^a-zA-Z0-9]/.test(password);
    }
    function openLoginModal() {document.getElementById('loginModal').style.display = 'flex';}
    function closeLoginModal() {document.getElementById('loginModal').style.display = 'none';}
    function showTab(tabId) {
        document.getElementById('teacher-register').style.display = 'none';
        document.getElementById('parent-register').style.display = 'none';
        document.getElementById(tabId).style.display = 'block';
        const tabButtons = document.querySelectorAll('.tab-btn');
        tabButtons.forEach(btn => btn.classList.remove('active'));
        event.target.classList.add('active');
    }
    function showProfileTab(tabId) {
        document.querySelectorAll('.profile-content').forEach(tab => tab.classList.remove('active'));
        document.querySelectorAll('.profile-tab-btn').forEach(btn => btn.classList.remove('active'));
        document.getElementById(tabId).classList.add('active');
        event.target.classList.add('active');
    }
    function contactTeacher(id) {
        openLoginModal();
    }
    function populateCityDropdowns() {
        const citySelects = [
            document.getElementById('searchCity'),
            document.getElementById('teacherCity'),
            document.getElementById('parentCity')
        ];
        citySelects.forEach(select => {
            if (select && select.options.length < 5) { // pour éviter duplicates
                frenchCities.forEach(city => {
                    const option = document.createElement('option');
                    option.value = city;
                    option.textContent = city;
                    select.appendChild(option);
                });
            }
        });
    }

    // --- INIT ---
    document.addEventListener('DOMContentLoaded', function() {
        renderTeachers(teachers);
        populateCityDropdowns();
        if(document.getElementById('teacherPassword')) {
            document.getElementById('teacherPassword').addEventListener('input', function() {
                validatePassword(this.value);
            });
        }
    });
    </script>
</body>
</html>
