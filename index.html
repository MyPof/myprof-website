<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MyProfEduc - Cours Particuliers Simples et Efficaces</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary-color: #3f51b5;
            --secondary-color: #5c6bc0;
            --accent-color: #ffc107;
            --text-color: #424242;
            --light-bg: #f5f5f5;
            --dark-bg: #212121;
        }

        body {
            font-family: 'Roboto', sans-serif;
            background-color: var(--light-bg);
            color: var(--text-color);
            line-height: 1.6;
            margin: 0;
            display: flex;
            flex-direction: column;
            min-height: 100vh;
        }

        /* Utility classes */
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 1.5rem;
        }

        .section-title {
            font-size: 2.5rem;
            font-weight: 700;
            color: var(--primary-color);
            text-align: center;
            margin-bottom: 3rem;
        }

        .btn {
            display: inline-block;
            padding: 1rem 2.5rem;
            border-radius: 50px;
            text-decoration: none;
            font-weight: 500;
            font-size: 1rem;
            transition: transform 0.3s ease, box-shadow 0.3s ease;
            cursor: pointer;
            border: none;
            text-align: center;
        }

        .btn-primary {
            background-color: var(--primary-color);
            color: white;
            box-shadow: 0 4px 15px rgba(63, 81, 181, 0.3);
        }

        .btn-primary:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 20px rgba(63, 81, 181, 0.4);
        }

        .btn-secondary {
            background-color: var(--accent-color);
            color: var(--text-color);
            box-shadow: 0 4px 15px rgba(255, 193, 7, 0.3);
        }

        .btn-secondary:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 20px rgba(255, 193, 7, 0.4);
        }

        /* Header */
        header {
            background-color: white;
            box-shadow: 0 2px 10px rgba(0,0,0,0.05);
            padding: 1rem 0;
            position: sticky;
            top: 0;
            z-index: 1000;
        }

        .header-content {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .logo {
            font-size: 1.5rem;
            font-weight: 700;
            color: var(--primary-color);
        }
        
        nav ul {
            display: flex;
            list-style: none;
            margin: 0;
            padding: 0;
        }

        nav ul li {
            margin-left: 1.5rem;
        }

        nav ul li a {
            text-decoration: none;
            color: var(--text-color);
            font-weight: 500;
            transition: color 0.3s ease;
        }

        nav ul li a:hover, nav ul li a.active {
            color: var(--primary-color);
        }

        /* Hero Section */
        .hero {
            background: linear-gradient(rgba(0,0,0,0.6), rgba(0,0,0,0.6)), url('https://images.unsplash.com/photo-1544716278-ca5e3f4abd8c?ixlib=rb-4.0.3&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=1974&q=80') no-repeat center/cover;
            color: white;
            padding: 8rem 0;
            text-align: center;
            position: relative;
        }

        .hero h1 {
            font-size: 3.5rem;
            margin-bottom: 1rem;
            font-weight: 700;
        }

        .hero p {
            font-size: 1.25rem;
            font-weight: 300;
            max-width: 600px;
            margin: 0 auto 2rem;
        }

        /* Sections */
        section {
            padding: 5rem 0;
        }
        
        section#home {
            background-color: white;
        }
        
        .grid-3 {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 2rem;
        }

        .feature-card {
            background-color: var(--light-bg);
            padding: 2.5rem;
            border-radius: 12px;
            text-align: center;
            transition: transform 0.3s ease, box-shadow 0.3s ease;
            box-shadow: 0 4px 10px rgba(0,0,0,0.05);
        }
        
        .feature-card:hover {
            transform: translateY(-10px);
            box-shadow: 0 10px 20px rgba(0,0,0,0.1);
        }

        .feature-icon {
            font-size: 3.5rem;
            color: var(--primary-color);
            margin-bottom: 1rem;
        }

        .feature-card h3 {
            font-size: 1.5rem;
            color: var(--primary-color);
            margin-bottom: 0.5rem;
        }

        /* Teachers Section */
        #teachers {
            background-color: white;
        }

        .search-filters {
            background-color: var(--light-bg);
            padding: 2rem;
            border-radius: 12px;
            box-shadow: 0 4px 10px rgba(0,0,0,0.05);
            display: flex;
            flex-wrap: wrap;
            gap: 1.5rem;
            align-items: flex-end;
            margin-bottom: 3rem;
        }

        .filter-group {
            flex: 1;
            min-width: 200px;
        }

        .filter-group label {
            display: block;
            margin-bottom: 0.5rem;
            font-weight: 500;
            color: var(--text-color);
        }

        .filter-group input, .filter-group select {
            width: 100%;
            padding: 0.75rem 1rem;
            border: 1px solid #ddd;
            border-radius: 8px;
            font-size: 1rem;
        }

        .teacher-list {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 2rem;
        }

        .teacher-card {
            background-color: var(--light-bg);
            border-radius: 12px;
            overflow: hidden;
            box-shadow: 0 4px 10px rgba(0,0,0,0.05);
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }

        .teacher-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 15px rgba(0,0,0,0.1);
        }

        .teacher-photo {
            width: 100%;
            height: 250px;
            object-fit: cover;
            border-bottom: 4px solid var(--primary-color);
        }

        .teacher-info {
            padding: 1.5rem;
        }

        .teacher-name {
            font-size: 1.5rem;
            color: var(--primary-color);
            margin: 0 0 0.5rem;
        }

        .teacher-subject {
            font-weight: 500;
            color: var(--text-color);
            margin: 0 0 1rem;
        }

        .teacher-details {
            display: flex;
            align-items: center;
            margin-bottom: 0.5rem;
            color: #757575;
        }
        
        .teacher-details i {
            margin-right: 10px;
            color: var(--primary-color);
        }

        .price {
            font-size: 1.6rem;
            font-weight: 700;
            color: var(--primary-color);
            margin: 1rem 0;
            text-align: right;
        }

        /* Registration section */
        #registration {
            background-color: var(--light-bg);
        }
        
        .tabs {
            display: flex;
            justify-content: center;
            margin-bottom: 2rem;
        }
        
        .tab-btn {
            background: none;
            border: none;
            padding: 0.75rem 2rem;
            cursor: pointer;
            font-size: 1.1rem;
            font-weight: 500;
            color: #9e9e9e;
            border-bottom: 3px solid transparent;
            transition: all 0.3s ease;
        }
        
        .tab-btn.active {
            color: var(--primary-color);
            border-bottom-color: var(--primary-color);
        }
        
        .form-card {
            background-color: white;
            padding: 3rem;
            border-radius: 12px;
            box-shadow: 0 4px 10px rgba(0,0,0,0.05);
            max-width: 600px;
            margin: 0 auto;
        }

        .form-group {
            margin-bottom: 1.5rem;
        }
        
        .form-group label {
            display: block;
            margin-bottom: 0.5rem;
            font-weight: 500;
        }

        .form-group input, .form-group select, .form-group textarea {
            width: 100%;
            padding: 0.75rem 1rem;
            border: 1px solid #ddd;
            border-radius: 8px;
            font-size: 1rem;
            transition: all 0.3s ease;
        }

        .form-group input:focus, .form-group select:focus, .form-group textarea:focus {
            outline: none;
            border-color: var(--primary-color);
            box-shadow: 0 0 0 3px rgba(63, 81, 181, 0.2);
        }

        .password-validation {
            font-size: 0.8rem;
            color: #757575;
            margin-top: 0.5rem;
        }
        
        .password-validation li {
            list-style: none;
            display: flex;
            align-items: center;
            margin-bottom: 0.3rem;
        }
        
        .password-validation li.valid {
            color: #4caf50;
        }
        
        .password-validation li.valid i {
            color: #4caf50;
        }
        
        .password-validation li i {
            margin-right: 0.5rem;
            color: #e57373;
        }
        
        .password-strength-bar {
            height: 5px;
            background-color: #eee;
            border-radius: 3px;
            margin-top: 0.5rem;
        }
        
        .strength {
            height: 100%;
            width: 0;
            transition: width 0.3s ease, background-color 0.3s ease;
            background-color: #e57373;
        }
        
        .strength.medium {
            background-color: #ffb74d;
        }
        
        .strength.strong {
            background-color: #4caf50;
        }

        /* Modals */
        .modal {
            display: none;
            position: fixed;
            z-index: 1001;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            overflow: auto;
            background-color: rgba(0,0,0,0.4);
            justify-content: center;
            align-items: center;
        }
        
        .modal-content {
            background-color: white;
            padding: 2.5rem;
            border-radius: 12px;
            box-shadow: 0 10px 20px rgba(0,0,0,0.2);
            position: relative;
            max-width: 450px;
            width: 90%;
            text-align: center;
        }

        .modal-content h3 {
            color: var(--primary-color);
            margin-top: 0;
        }

        .modal-close {
            position: absolute;
            top: 15px;
            right: 15px;
            color: #aaa;
            font-size: 1.5rem;
            cursor: pointer;
            transition: color 0.3s ease;
        }

        .modal-close:hover {
            color: var(--primary-color);
        }

        /* Footer */
        footer {
            background-color: var(--dark-bg);
            color: white;
            padding: 3rem 0;
            text-align: center;
            margin-top: auto;
        }
        
        .footer-content {
            display: flex;
            flex-direction: column;
            gap: 1.5rem;
        }
        
        .footer-content p {
            margin: 0;
        }

        .footer-links a {
            color: white;
            text-decoration: none;
            margin: 0 10px;
            transition: color 0.3s ease;
        }

        .footer-links a:hover {
            color: var(--accent-color);
        }

        @media (max-width: 768px) {
            .header-content {
                flex-direction: column;
                text-align: center;
            }
            nav ul {
                margin-top: 1rem;
            }
            .hero h1 {
                font-size: 2.5rem;
            }
        }

    </style>
</head>
<body>

<header>
    <div class="container header-content">
        <a href="#" class="logo">MyProfEduc</a>
        <nav>
            <ul>
                <li><a href="#home" class="active">Accueil</a></li>
                <li><a href="#teachers">Parents</a></li>
                <li><a href="#registration">Enseignants</a></li>
                <li><a href="#about">À propos</a></li>
                <li id="loginNavItem"><a href="#" onclick="openLoginModal()">Connexion</a></li>
                <li id="profileNavItem" style="display: none;"><a href="#profile">Mon profil</a></li>
                <li id="logoutNavItem" style="display: none;"><a href="#" onclick="logout()">Déconnexion</a></li>
            </ul>
        </nav>
    </div>
</header>

<section id="hero" class="hero">
    <div class="hero-content">
        <h1>Connecter les Familles aux Meilleurs Enseignants</h1>
        <p>Trouvez l'aide scolaire parfaite pour votre enfant ou proposez vos services d'enseignement en toute simplicité.</p>
        <a href="#teachers" class="btn btn-secondary">Trouver un enseignant</a>
        <a href="#registration" class="btn btn-primary">Devenir enseignant</a>
    </div>
</section>

<section id="home">
    <div class="container">
        <h2 class="section-title">Comment ça fonctionne ?</h2>
        <div class="grid-3">
            <div class="feature-card">
                <i class="fas fa-search feature-icon"></i>
                <h3>1. Recherchez</h3>
                <p>Trouvez un enseignant qualifié par matière et par ville.</p>
            </div>
            <div class="feature-card">
                <i class="fas fa-handshake feature-icon"></i>
                <h3>2. Contactez</h3>
                <p>Envoyez une demande de contact pour 5€. Le paiement n'est validé que si l'enseignant accepte.</p>
            </div>
            <div class="feature-card">
                <i class="fas fa-chalkboard-teacher feature-icon"></i>
                <h3>3. Apprenez</h3>
                <p>Organisez les cours et payez l'enseignant directement, sans commission supplémentaire.</p>
            </div>
        </div>
    </div>
</section>

<section id="teachers">
    <div class="container">
        <h2 class="section-title">Trouvez votre enseignant</h2>
        <div class="search-filters">
            <div class="filter-group">
                <label for="searchSubject">Matière</label>
                <select id="searchSubject">
                    <option value="">Toutes</option>
                    <option value="Mathématiques">Mathématiques</option>
                    <option value="Français">Français</option>
                    <option value="Physique-Chimie">Physique-Chimie</option>
                    <option value="Anglais">Anglais</option>
                </select>
            </div>
            <div class="filter-group">
                <label for="searchCity">Ville</label>
                <input type="text" id="searchCity" placeholder="Ex: Paris">
            </div>
            <div class="filter-group">
                <label for="maxPrice">Prix max (€/h)</label>
                <input type="number" id="maxPrice" placeholder="Ex: 25">
            </div>
            <button class="btn btn-primary" onclick="filterTeachers()">Rechercher</button>
        </div>
        <div class="teacher-list" id="teacherList">
            </div>
    </div>
</section>

<section id="registration">
    <div class="container">
        <h2 class="section-title">Rejoignez-nous</h2>
        <div class="tabs">
            <button class="tab-btn active" data-tab="parent">Parent</button>
            <button class="tab-btn" data-tab="teacher">Enseignant</button>
        </div>
        
        <div id="parentForm" class="form-card">
            <h3>Inscription Parent</h3>
            <form id="parentRegistrationForm">
                <div class="form-group">
                    <label for="parentName">Nom & Prénom</label>
                    <input type="text" id="parentName" required>
                </div>
                <div class="form-group">
                    <label for="parentEmail">Email</label>
                    <input type="email" id="parentEmail" required>
                </div>
                <div class="form-group">
                    <label for="parentPassword">Mot de passe</label>
                    <input type="password" id="parentPassword" required>
                    <div class="password-strength-bar"><div id="parentStrength" class="strength"></div></div>
                    <ul class="password-validation">
                        <li id="parentLength">Au moins 8 caractères</li>
                        <li id="parentUppercase">Une lettre majuscule</li>
                        <li id="parentLowercase">Une lettre minuscule</li>
                        <li id="parentNumber">Un chiffre</li>
                        <li id="parentSpecial">Un caractère spécial</li>
                    </ul>
                </div>
                <div class="form-group">
                    <label for="parentConfirmPassword">Confirmer le mot de passe</label>
                    <input type="password" id="parentConfirmPassword" required>
                    <p id="parentMatch"></p>
                </div>
                <button type="submit" class="btn btn-primary">S'inscrire</button>
            </form>
        </div>

        <div id="teacherForm" class="form-card" style="display: none;">
            <h3>Inscription Enseignant</h3>
            <form id="teacherRegistrationForm">
                <div class="form-group">
                    <label for="teacherName">Nom & Prénom</label>
                    <input type="text" id="teacherName" required>
                </div>
                <div class="form-group">
                    <label for="teacherEmail">Email</label>
                    <input type="email" id="teacherEmail" required>
                </div>
                <div class="form-group">
                    <label for="teacherPassword">Mot de passe</label>
                    <input type="password" id="teacherPassword" required>
                    <div class="password-strength-bar"><div id="teacherStrength" class="strength"></div></div>
                    <ul class="password-validation">
                        <li id="teacherLength">Au moins 8 caractères</li>
                        <li id="teacherUppercase">Une lettre majuscule</li>
                        <li id="teacherLowercase">Une lettre minuscule</li>
                        <li id="teacherNumber">Un chiffre</li>
                        <li id="teacherSpecial">Un caractère spécial</li>
                    </ul>
                </div>
                <div class="form-group">
                    <label for="teacherConfirmPassword">Confirmer le mot de passe</label>
                    <input type="password" id="teacherConfirmPassword" required>
                    <p id="teacherMatch"></p>
                </div>
                <div class="form-group">
                    <label for="subject">Matière(s) enseignée(s)</label>
                    <input type="text" id="teacherSubject" placeholder="Ex: Mathématiques, Physique" required>
                </div>
                <div class="form-group">
                    <label for="teacherCity">Ville</label>
                    <select id="teacherCity" required></select>
                </div>
                <div class="form-group">
                    <label for="price">Prix par heure (€)</label>
                    <input type="number" id="teacherPrice" placeholder="Ex: 25" required>
                </div>
                <div class="form-group">
                    <label for="experience">Années d'expérience</label>
                    <input type="number" id="teacherExperience" placeholder="Ex: 5" required>
                </div>
                <div class="form-group">
                    <label for="teacherDescription">Description de votre profil</label>
                    <textarea id="teacherDescription" rows="4" placeholder="Présentez-vous, votre méthode, et vos spécialités..."></textarea>
                </div>
                <button type="submit" class="btn btn-primary">S'inscrire comme enseignant</button>
            </form>
        </div>
    </div>
</section>

<section id="about" style="display: none;">
    <div class="container">
        <h2 class="section-title">À propos de nous</h2>
        <div class="info-section">
            <p>MyProfEduc est une plateforme unique qui met en relation des parents d'élèves à la recherche de soutien scolaire et des enseignants qualifiés. Notre mission est de faciliter une connexion directe et transparente, sans intermédiaire, afin de rendre l'accès à l'éducation de qualité plus abordable et de permettre aux enseignants de valoriser leur travail.</p>
            <p>Notre modèle de paiement est simple : une commission de **5€** est facturée au parent lors de la demande de contact, et une autre de **5€** à l'enseignant lorsque celui-ci accepte la mise en relation. Ce système garantit que les deux parties sont engagées et réduit les coûts pour les familles tout en augmentant les revenus des enseignants.</p>
        </div>
    </div>
</section>

<section id="profile" style="display: none;">
    <div class="container">
        <h2 class="section-title">Mon Profil</h2>
        <div class="profile-container form-card">
            <h3>Informations Personnelles</h3>
            <div class="form-group">
                <label>Nom & Prénom:</label>
                <span id="profileName"></span>
            </div>
            <div class="form-group">
                <label>Email:</label>
                <span id="profileEmail"></span>
            </div>
            <button class="btn btn-primary" onclick="showSection('teachers')">Chercher un Enseignant</button>
        </div>
    </div>
</section>

<div id="contactModal" class="modal">
    <div class="modal-content">
        <span class="modal-close" onclick="closeModal()">×</span>
        <h3>Contacter l'enseignant</h3>
        <p>Pour établir le contact, une commission de **5€** sera pré-autorisée sur votre carte. Vous ne serez débité que si l'enseignant accepte votre demande.</p>
        <button class="btn btn-primary" id="confirmContactBtn">Confirmer la demande</button>
        <button class="btn btn-secondary" onclick="closeModal()">Annuler</button>
    </div>
</div>

<div id="loginModal" class="modal">
    <div class="modal-content">
        <span class="modal-close" onclick="closeModal()">×</span>
        <h3>Connexion</h3>
        <form id="loginForm">
            <div class="form-group">
                <label for="loginEmail">Email</label>
                <input type="email" id="loginEmail" required>
            </div>
            <div class="form-group">
                <label for="loginPassword">Mot de passe</label>
                <input type="password" id="loginPassword" required>
            </div>
            <button type="submit" class="btn btn-primary">Se connecter</button>
        </form>
    </div>
</div>

<footer>
    <div class="container footer-content">
        <p>&copy; 2025 MyProfEduc. Tous droits réservés.</p>
        <div class="footer-links">
            <a href="#about">À propos</a>
            <a href="#terms">Conditions d'utilisation</a>
            <a href="#privacy">Politique de confidentialité</a>
        </div>
    </div>
</footer>

<script>
    // Faux-base de données
    const teachers = [
        { id: 1, name: "Sophie Martin", subject: "Mathématiques", price: 20, city: "Paris", experience: "5 ans", photo: "https://images.unsplash.com/photo-1544716278-ca5e3f4abd8c?ixlib=rb-4.0.3&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=400&q=80" },
        { id: 2, name: "Thomas Bernard", subject: "Français", price: 18, city: "Lyon", experience: "3 ans", photo: "https://images.unsplash.com/photo-1560250097-0b93528c311a?ixlib=rb-4.0.3&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=400&q=80" },
        { id: 3, name: "Claire Dubois", subject: "Physique-Chimie", price: 25, city: "Marseille", experience: "8 ans", photo: "https://images.unsplash.com/photo-1573496359142-b8d87734a5a2?ixlib=rb-4.0.3&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=400&q=80" },
        { id: 4, name: "Michel Dupont", subject: "Anglais", price: 19, city: "Toulouse", experience: "10 ans", photo: "https://images.unsplash.com/photo-1507003211169-0a1dd7228f2d?ixlib=rb-4.0.3&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=400&q=80" }
    ];
    
    const frenchCities = [ "Paris", "Marseille", "Lyon", "Toulouse", "Nice", "Nantes", "Strasbourg", "Montpellier", "Bordeaux", "Lille", "Rennes", "Reims", "Le Havre", "Saint-Étienne", "Toulon", "Grenoble", "Dijon", "Angers", "Nîmes", "Villeurbanne", "Le Mans", "Aix-en-Provence", "Clermont-Ferrand", "Brest", "Limoges", "Tours", "Amiens", "Perpignan", "Metz", "Besançon", "Boulogne-Billancourt", "Orléans", "Mulhouse", "Rouen", "Saint-Denis", "Caen", "Argenteuil", "Saint-Paul", "Montreuil", "Nancy", "Roubaix", "Tourcoing", "Nanterre", "Avignon", "Vitry-sur-Seine", "Créteil", "Dunkirk", "Poitiers", "Asnières-sur-Seine", "Courbevoie", "Versailles" ];

    let currentUser = JSON.parse(localStorage.getItem('myprof_currentUser')) || null;
    let pendingUser = JSON.parse(localStorage.getItem('myprof_pendingUser')) || null;
    
    // UI Helpers
    function showSection(sectionId) {
        document.querySelectorAll('section').forEach(section => {
            section.style.display = 'none';
        });
        document.getElementById(sectionId).style.display = 'block';
        document.querySelectorAll('nav a').forEach(link => {
            link.classList.remove('active');
        });
        document.querySelector(`nav a[href="#${sectionId}"]`).classList.add('active');
    }

    function openModal(modalId) {
        document.getElementById(modalId).style.display = 'flex';
    }

    function closeModal() {
        document.querySelectorAll('.modal').forEach(modal => modal.style.display = 'none');
    }

    // Auth Logic
    function updateAuthUI() {
        const loggedIn = !!currentUser;
        document.getElementById('loginNavItem').style.display = loggedIn ? 'none' : 'list-item';
        document.getElementById('logoutNavItem').style.display = loggedIn ? 'list-item' : 'none';
        document.getElementById('profileNavItem').style.display = loggedIn ? 'list-item' : 'none';
    }

    function login(email, password) {
        if (email === "parent@test.fr" && password === "Passw0rd#") {
            currentUser = { email: email, name: "Parent Test", type: "parent" };
            localStorage.setItem('myprof_currentUser', JSON.stringify(currentUser));
            updateAuthUI();
            showSection('teachers');
            closeModal();
            return true;
        }
        if (email === "teacher@test.fr" && password === "Passw0rd#") {
            currentUser = { email: email, name: "Enseignant Test", type: "teacher" };
            localStorage.setItem('myprof_currentUser', JSON.stringify(currentUser));
            updateAuthUI();
            showSection('profile');
            closeModal();
            return true;
        }
        alert("Email ou mot de passe incorrect.");
        return false;
    }

    function logout() {
        currentUser = null;
        localStorage.removeItem('myprof_currentUser');
        updateAuthUI();
        showSection('hero');
    }

    // Teacher & Filter Logic
    function displayTeachers(teachersToShow) {
        const teacherList = document.getElementById('teacherList');
        teacherList.innerHTML = '';
        if (teachersToShow.length === 0) {
            teacherList.innerHTML = '<p style="text-align: center; grid-column: 1 / -1;">Aucun enseignant ne correspond à vos critères.</p>';
            return;
        }
        teachersToShow.forEach(teacher => {
            const card = document.createElement('div');
            card.className = 'teacher-card';
            card.innerHTML = `
                <img src="${teacher.photo}" alt="${teacher.name}" class="teacher-photo">
                <div class="teacher-info">
                    <h3 class="teacher-name">${teacher.name}</h3>
                    <p class="teacher-subject">${teacher.subject}</p>
                    <div class="teacher-details"><i class="fas fa-map-marker-alt"></i><span>${teacher.city}</span></div>
                    <div class="teacher-details"><i class="fas fa-briefcase"></i><span>${teacher.experience} d'expérience</span></div>
                    <div class="price">${teacher.price}€/h</div>
                    <button class="btn btn-primary" onclick="openContactModal(${teacher.id})">Contacter</button>
                </div>
            `;
            teacherList.appendChild(card);
        });
    }

    function filterTeachers() {
        const subject = document.getElementById('searchSubject').value;
        const city = document.getElementById('searchCity').value.toLowerCase();
        const maxPrice = parseInt(document.getElementById('maxPrice').value) || Infinity;

        const filtered = teachers.filter(teacher => {
            const subjectMatch = !subject || teacher.subject === subject;
            const cityMatch = !city || teacher.city.toLowerCase().includes(city);
            const priceMatch = teacher.price <= maxPrice;
            return subjectMatch && cityMatch && priceMatch;
        });

        displayTeachers(filtered);
    }
    
    function openContactModal(teacherId) {
        if (!currentUser || currentUser.type !== 'parent') {
            alert("Veuillez vous connecter en tant que parent pour contacter un enseignant.");
            return;
        }
        openModal('contactModal');
        document.getElementById('confirmContactBtn').dataset.teacherId = teacherId;
    }

    // Contact/Payment Simulation
    document.getElementById('confirmContactBtn').addEventListener('click', () => {
        const teacherId = document.getElementById('confirmContactBtn').dataset.teacherId;
        const teacher = teachers.find(t => t.id == teacherId);
        
        // Simule le pré-débit des 5€ pour le parent
        alert(`Demande de contact envoyée à ${teacher.name}. 5€ ont été pré-autorisés sur votre compte et seront débités si l'enseignant accepte.`);
        closeModal();
        
        // Simule la réception de la demande par l'enseignant
        setTimeout(() => {
            const teacherAccepts = confirm(`Notification : Vous avez une nouvelle demande de contact de ${currentUser.name}. Acceptez-vous et payez-vous les 5€ de commission ?`);
            if (teacherAccepts) {
                alert(`Demande acceptée ! Le contact est établi avec ${currentUser.name}. Les 5€ de commission ont été débités de votre compte. Le parent a également été débité.`);
            } else {
                alert(`Demande refusée. Le parent ne sera pas débité.`);
            }
        }, 3000);
    });

    // Registration Tabs
    document.querySelectorAll('.tab-btn').forEach(button => {
        button.addEventListener('click', () => {
            document.querySelectorAll('.tab-btn').forEach(btn => btn.classList.remove('active'));
            button.classList.add('active');
            
            document.getElementById('parentForm').style.display = 'none';
            document.getElementById('teacherForm').style.display = 'none';
            
            if (button.dataset.tab === 'parent') {
                document.getElementById('parentForm').style.display = 'block';
            } else {
                document.getElementById('teacherForm').style.display = 'block';
            }
        });
    });

    // Password Validation
    function checkPassword(password, type) {
        const length = password.length >= 8;
        const uppercase = /[A-Z]/.test(password);
        const lowercase = /[a-z]/.test(password);
        const number = /[0-9]/.test(password);
        const special = /[^A-Za-z0-9]/.test(password);

        const requirements = [
            { id: `${type}Length`, met: length, text: 'Au moins 8 caractères' },
            { id: `${type}Uppercase`, met: uppercase, text: 'Une lettre majuscule' },
            { id: `${type}Lowercase`, met: lowercase, text: 'Une lettre minuscule' },
            { id: `${type}Number`, met: number, text: 'Un chiffre' },
            { id: `${type}Special`, met: special, text: 'Un caractère spécial' }
        ];

        requirements.forEach(req => {
            const el = document.getElementById(req.id);
            el.className = req.met ? 'valid' : '';
            el.innerHTML = `<i class="fas fa-${req.met ? 'check' : 'times'}"></i> ${req.text}`;
        });
        
        const metCount = requirements.filter(req => req.met).length;
        const strengthBar = document.getElementById(`${type}Strength`);
        strengthBar.style.width = `${(metCount / requirements.length) * 100}%`;
        
        if (metCount < 3) strengthBar.className = 'strength';
        else if (metCount < 5) strengthBar.className = 'strength medium';
        else strengthBar.className = 'strength strong';
    }

    document.getElementById('parentPassword').addEventListener('input', e => checkPassword(e.target.value, 'parent'));
    document.getElementById('teacherPassword').addEventListener('input', e => checkPassword(e.target.value, 'teacher'));
    document.getElementById('parentConfirmPassword').addEventListener('input', () => {
        const match = document.getElementById('parentPassword').value === document.getElementById('parentConfirmPassword').value;
        document.getElementById('parentMatch').innerHTML = match ? '<i class="fas fa-check" style="color: #4caf50;"></i> Les mots de passe correspondent' : '<i class="fas fa-times" style="color: #e57373;"></i> Les mots de passe ne correspondent pas';
    });
    document.getElementById('teacherConfirmPassword').addEventListener('input', () => {
        const match = document.getElementById('teacherPassword').value === document.getElementById('teacherConfirmPassword').value;
        document.getElementById('teacherMatch').innerHTML = match ? '<i class="fas fa-check" style="color: #4caf50;"></i> Les mots de passe correspondent' : '<i class="fas fa-times" style="color: #e57373;"></i> Les mots de passe ne correspondent pas';
    });

    // Initial Load
    document.addEventListener('DOMContentLoaded', () => {
        updateAuthUI();
        displayTeachers(teachers);
        showSection('hero');

        document.querySelectorAll('nav a').forEach(link => {
            link.addEventListener('click', (e) => {
                e.preventDefault();
                const sectionId = link.getAttribute('href').substring(1);
                showSection(sectionId);
            });
        });

        const teacherCitySelect = document.getElementById('teacherCity');
        frenchCities.sort().forEach(city => {
            const option = document.createElement('option');
            option.value = city;
            option.textContent = city;
            teacherCitySelect.appendChild(option);
        });
    });

    // Forms
    document.getElementById('parentRegistrationForm').addEventListener('submit', (e) => {
        e.preventDefault();
        alert('Inscription parent réussie ! Vous pouvez maintenant vous connecter.');
        closeModal();
    });

    document.getElementById('teacherRegistrationForm').addEventListener('submit', (e) => {
        e.preventDefault();
        alert('Inscription enseignant réussie ! Votre profil est en attente de validation.');
        closeModal();
    });

    document.getElementById('loginForm').addEventListener('submit', (e) => {
        e.preventDefault();
        const email = document.getElementById('loginEmail').value;
        const password = document.getElementById('loginPassword').value;
        login(email, password);
    });
</script>
</body>
</html>
