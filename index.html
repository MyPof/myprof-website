<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MyProfEduc - Cours Particuliers Simples et Efficaces</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700&family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <style>
        /* ... (le CSS reste exactement le même) ... */
    </style>
</head>
<body>
    <!-- ... (le HTML reste exactement le même jusqu'à la section registration) ... -->

    <!-- Registration Section -->
    <section id="registration">
        <div class="container">
            <h2 class="section-title">Rejoignez-nous</h2>
            <p class="section-subtitle">Inscrivez-vous en tant qu'enseignant ou parent pour profiter de tous les avantages de notre plateforme.</p>
            
            <div class="tabs">
                <button class="tab-btn active" onclick="showTab('teacher-register')">Enseignant</button>
                <button class="tab-btn" onclick="showTab('parent-register')">Parent</button>
            </div>
            
            <div id="teacher-register" class="form-card">
                <h3>Inscription Enseignant</h3>
                <div class="photo-upload">
                    <img src="https://via.placeholder.com/150" alt="Photo de profil" class="profile-photo" id="teacherPhotoPreview">
                    <label for="teacherPhoto" class="photo-upload-btn">
                        <i class="fas fa-camera"></i> Ajouter une photo
                    </label>
                    <input type="file" id="teacherPhoto" accept="image/*" style="display: none;" onchange="previewTeacherPhoto(event)">
                </div>
                
                <div class="form-group">
                    <label for="teacherName">Nom complet</label>
                    <input type="text" id="teacherName" placeholder="Votre nom et prénom">
                </div>
                
                <div class="form-group">
                    <label for="teacherEmail">Email</label>
                    <input type="email" id="teacherEmail" placeholder="Votre adresse email">
                </div>
                
                <div class="form-group">
                    <label for="teacherPassword">Mot de passe</label>
                    <input type="password" id="teacherPassword" placeholder="Créez un mot de passe sécurisé">
                    <div class="password-validation">
                        <ul>
                            <li id="lengthValidation"><i class="fas fa-times"></i> Au moins 8 caractères</li>
                            <li id="uppercaseValidation"><i class="fas fa-times"></i> Au moins une majuscule</li>
                            <li id="numberValidation"><i class="fas fa-times"></i> Au moins un chiffre</li>
                            <li id="specialValidation"><i class="fas fa-times"></i> Au moins un caractère spécial</li>
                        </ul>
                        <div class="password-strength-bar">
                            <div class="strength" id="passwordStrength"></div>
                        </div>
                    </div>
                </div>
                
                <div class="form-group">
                    <label for="teacherConfirmPassword">Confirmer le mot de passe</label>
                    <input type="password" id="teacherConfirmPassword" placeholder="Confirmez votre mot de passe">
                </div>
                
                <div class="form-group">
                    <label>Matières enseignées</label>
                    <div class="tags-container" id="teacherSubjects"></div>
                    <div class="add-tag-form">
                        <input type="text" id="newSubject" placeholder="Ajouter une matière" class="add-tag-input">
                        <button class="btn btn-primary" onclick="addSubject()">Ajouter</button>
                    </div>
                </div>
                
                <div class="form-group">
                    <label>Diplômes</label>
                    <div class="tags-container" id="teacherDegrees"></div>
                    <div class="add-tag-form">
                        <input type="text" id="newDegree" placeholder="Ajouter un diplôme" class="add-tag-input">
                        <button class="btn btn-primary" onclick="addDegree()">Ajouter</button>
                    </div>
                </div>
                
                <div class="form-group">
                    <label for="teacherCity">Ville</label>
                    <select id="teacherCity">
                        <option value="">Sélectionnez votre ville</option>
                        <!-- Les villes seront ajoutées dynamiquement -->
                    </select>
                </div>
                
                <div class="form-group">
                    <label for="teacherExperience">Années d'expérience</label>
                    <input type="number" id="teacherExperience" min="0" placeholder="Nombre d'années d'expérience">
                </div>
                
                <div class="form-group">
                    <label for="teacherRate">Tarif horaire (€)</label>
                    <input type="number" id="teacherRate" min="0" placeholder="Ex: 25">
                </div>
                
                <div class="form-group">
                    <label for="teacherBio">Présentation</label>
                    <textarea id="teacherBio" rows="4" placeholder="Présentez-vous en quelques lignes..."></textarea>
                </div>
                
                <button class="btn btn-primary" onclick="registerTeacher()">
                    <i class="fas fa-user-plus"></i> S'inscrire
                </button>
            </div>
            
            <div id="parent-register" class="form-card" style="display: none;">
                <!-- ... (le formulaire parent reste le même) ... -->
            </div>
        </div>
    </section>

    <!-- Profile Section -->
    <section id="profile">
        <div class="container">
            <div class="profile-tabs">
                <button class="profile-tab-btn active" onclick="showProfileTab('profile-info')">Informations</button>
                <button class="profile-tab-btn" onclick="showProfileTab('profile-children')">Mes enfants</button>
                <button class="profile-tab-btn" onclick="showProfileTab('profile-bookings')">Réservations</button>
                <button class="profile-tab-btn" onclick="showProfileTab('profile-edit')">Modifier mon profil</button>
            </div>
            
            <div id="profile-info" class="profile-content active">
                <div class="form-card">
                    <h3>Mon Profil</h3>
                    <div id="profileContent"></div>
                </div>
            </div>
            
            <div id="profile-children" class="profile-content">
                <div class="form-card">
                    <h3>Mes Enfants</h3>
                    <button class="btn btn-primary" onclick="openAddChildModal()">
                        <i class="fas fa-plus"></i> Ajouter un enfant
                    </button>
                    <div class="children-list" id="childrenList"></div>
                </div>
            </div>
            
            <div id="profile-bookings" class="profile-content">
                <div class="form-card">
                    <h3>Mes Réservations</h3>
                    <p>Vous n'avez aucune réservation pour le moment.</p>
                </div>
            </div>
            
            <div id="profile-edit" class="profile-content">
                <div class="form-card">
                    <h3>Modifier mon Profil</h3>
                    <div class="photo-upload">
                        <img src="https://via.placeholder.com/150" alt="Photo de profil" class="profile-photo" id="editTeacherPhotoPreview">
                        <label for="editTeacherPhoto" class="photo-upload-btn">
                            <i class="fas fa-camera"></i> Changer la photo
                        </label>
                        <input type="file" id="editTeacherPhoto" accept="image/*" style="display: none;" onchange="previewEditTeacherPhoto(event)">
                    </div>
                    
                    <div class="form-group">
                        <label for="editTeacherName">Nom complet</label>
                        <input type="text" id="editTeacherName" placeholder="Votre nom et prénom">
                    </div>
                    
                    <div class="form-group">
                        <label for="editTeacherEmail">Email</label>
                        <input type="email" id="editTeacherEmail" placeholder="Votre adresse email">
                    </div>
                    
                    <div class="form-group">
                        <label>Matières enseignées</label>
                        <div class="tags-container" id="editTeacherSubjects"></div>
                        <div class="add-tag-form">
                            <input type="text" id="editNewSubject" placeholder="Ajouter une matière" class="add-tag-input">
                            <button class="btn btn-primary" onclick="addEditSubject()">Ajouter</button>
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label>Diplômes</label>
                        <div class="tags-container" id="editTeacherDegrees"></div>
                        <div class="add-tag-form">
                            <input type="text" id="editNewDegree" placeholder="Ajouter un diplôme" class="add-tag-input">
                            <button class="btn btn-primary" onclick="addEditDegree()">Ajouter</button>
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label for="editTeacherCity">Ville</label>
                        <select id="editTeacherCity">
                            <option value="">Sélectionnez votre ville</option>
                            <!-- Les villes seront ajoutées dynamiquement -->
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label for="editTeacherExperience">Années d'expérience</label>
                        <input type="number" id="editTeacherExperience" min="0" placeholder="Nombre d'années d'expérience">
                    </div>
                    
                    <div class="form-group">
                        <label for="editTeacherRate">Tarif horaire (€)</label>
                        <input type="number" id="editTeacherRate" min="0" placeholder="Ex: 25">
                    </div>
                    
                    <div class="form-group">
                        <label for="editTeacherBio">Présentation</label>
                        <textarea id="editTeacherBio" rows="4" placeholder="Présentez-vous en quelques lignes..."></textarea>
                    </div>
                    
                    <button class="btn btn-primary" onclick="updateTeacherProfile()">
                        <i class="fas fa-save"></i> Enregistrer les modifications
                    </button>
                </div>
            </div>
        </div>
    </section>

    <!-- ... (le reste du HTML reste le même) ... -->

    <script>
        // Données des enseignants - maintenant modifiable
        let teachers = [
            {
                id: 1,
                name: "Sophie Martin",
                subject: "Mathématiques",
                city: "Paris",
                experience: 5,
                rate: 25,
                rating: 4.8,
                reviews: 42,
                photo: "https://images.unsplash.com/photo-1544005313-94ddf0286df2?ixlib=rb-4.0.3&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=776&q=80",
                bio: "Diplômée d'un master en mathématiques, j'enseigne depuis 5 ans avec une approche pédagogique adaptée à chaque élève.",
                email: "sophie.martin@example.com",
                subjects: ["Mathématiques"],
                degrees: ["Master Mathématiques"]
            },
            // ... (les autres enseignants initiaux)
        ];

        // Variable pour stocker l'utilisateur connecté
        let currentUser = null;

        // Fonction pour afficher les enseignants
        function renderTeachers(teachersToRender) {
            const teacherList = document.getElementById('teacherList');
            teacherList.innerHTML = '';
            
            if (teachersToRender.length === 0) {
                teacherList.innerHTML = '<div class="text-center" style="grid-column: 1/-1; padding: 2rem;">Aucun enseignant ne correspond à vos critères de recherche.</div>';
                return;
            }
            
            teachersToRender.forEach(teacher => {
                const stars = '★'.repeat(Math.floor(teacher.rating)) + '☆'.repeat(5 - Math.floor(teacher.rating));
                
                const teacherCard = document.createElement('div');
                teacherCard.className = 'teacher-card';
                teacherCard.innerHTML = `
                    <div class="teacher-badge">
                        <span class="badge badge-primary">Disponible</span>
                    </div>
                    <div class="teacher-photo-container">
                        <img src="${teacher.photo}" alt="${teacher.name}" class="teacher-photo">
                        <div class="teacher-overlay">
                            <h3 class="teacher-name">${teacher.name}</h3>
                            <p class="teacher-subject">${teacher.subject}</p>
                        </div>
                    </div>
                    <div class="teacher-info">
                        <div class="teacher-details">
                            <i class="fas fa-map-marker-alt"></i>
                            <span>${teacher.city}</span>
                        </div>
                        <div class="teacher-details">
                            <i class="fas fa-briefcase"></i>
                            <span>${teacher.experience} ans d'expérience</span>
                        </div>
                        <div class="teacher-rating">
                            <span class="stars">${stars}</span>
                            <span>${teacher.rating} (${teacher.reviews} avis)</span>
                        </div>
                        <p>${teacher.bio}</p>
                        <div class="price">${teacher.rate}€/h</div>
                        <button class="btn btn-primary" onclick="contactTeacher(${teacher.id})">
                            <i class="fas fa-envelope"></i> Contacter
                        </button>
                    </div>
                `;
                
                teacherList.appendChild(teacherCard);
            });
        }

        // Fonction pour enregistrer un enseignant
        function registerTeacher() {
            const name = document.getElementById('teacherName').value;
            const email = document.getElementById('teacherEmail').value;
            const password = document.getElementById('teacherPassword').value;
            const confirmPassword = document.getElementById('teacherConfirmPassword').value;
            const city = document.getElementById('teacherCity').value;
            const experience = document.getElementById('teacherExperience').value;
            const rate = document.getElementById('teacherRate').value;
            const bio = document.getElementById('teacherBio').value;
            
            // Validation basique
            if (!name || !email || !password || !confirmPassword || !city || !experience || !rate || !bio) {
                alert('Veuillez remplir tous les champs obligatoires.');
                return;
            }
            
            if (password !== confirmPassword) {
                alert('Les mots de passe ne correspondent pas.');
                return;
            }
            
            if (!validatePassword(password)) {
                alert('Le mot de passe ne respecte pas les critères de sécurité.');
                return;
            }
            
            // Récupérer les matières et diplômes
            const subjects = Array.from(document.getElementById('teacherSubjects').querySelectorAll('.tag'))
                .map(tag => tag.textContent.replace('×', '').trim());
                
            const degrees = Array.from(document.getElementById('teacherDegrees').querySelectorAll('.tag'))
                .map(tag => tag.textContent.replace('×', '').trim());
            
            if (subjects.length === 0) {
                alert('Veuillez ajouter au moins une matière.');
                return;
            }
            
            // Créer un nouvel enseignant
            const newTeacher = {
                id: teachers.length + 1,
                name: name,
                email: email,
                password: password, // En production, il faudrait hasher le mot de passe
                subject: subjects[0],
                subjects: subjects,
                degrees: degrees,
                city: city,
                experience: parseInt(experience),
                rate: parseInt(rate),
                rating: 4.5, // Note par défaut pour les nouveaux enseignants
                reviews: 0, // Aucun avis au début
                photo: document.getElementById('teacherPhotoPreview').src,
                bio: bio
            };
            
            // Ajouter le nouvel enseignant à la liste
            teachers.push(newTeacher);
            
            // Connecter automatiquement l'utilisateur
            currentUser = newTeacher;
            
            // Mettre à jour l'affichage des enseignants
            renderTeachers(teachers);
            
            // Mettre à jour l'interface
            document.getElementById('loginNavItem').style.display = 'none';
            document.getElementById('profileNavItem').style.display = 'list-item';
            document.getElementById('logoutNavItem').style.display = 'list-item';
            
            // Afficher le profil directement
            showProfile();
            
            // Réinitialiser le formulaire
            document.getElementById('teacher-register').reset();
            document.getElementById('teacherSubjects').innerHTML = '';
            document.getElementById('teacherDegrees').innerHTML = '';
            document.getElementById('teacherPhotoPreview').src = 'https://via.placeholder.com/150';
            
            // Mettre à jour le compteur d'enseignants
            document.getElementById('teacherCount').textContent = (parseInt(document.getElementById('teacherCount').textContent.replace(/,/g, '')) + 1).toLocaleString();
            
            alert('Inscription réussie ! Votre profil est maintenant visible dans la liste des enseignants.');
        }

        // Fonction pour afficher le profil
        function showProfile() {
            document.getElementById('registration').style.display = 'none';
            document.getElementById('verification').style.display = 'none';
            document.getElementById('profile').style.display = 'block';
            
            // Afficher les informations du profil
            if (currentUser) {
                document.getElementById('profileContent').innerHTML = `
                    <p><strong>Nom:</strong> ${currentUser.name}</p>
                    <p><strong>Email:</strong> ${currentUser.email}</p>
                    <p><strong>Type de compte:</strong> Enseignant</p>
                    <p><strong>Matières:</strong> ${currentUser.subjects.join(', ')}</p>
                    <p><strong>Ville:</strong> ${currentUser.city}</p>
                    <p><strong>Expérience:</strong> ${currentUser.experience} ans</p>
                    <p><strong>Tarif:</strong> ${currentUser.rate}€/h</p>
                `;
                
                // Pré-remplir le formulaire d'édition
                document.getElementById('editTeacherPhotoPreview').src = currentUser.photo;
                document.getElementById('editTeacherName').value = currentUser.name;
                document.getElementById('editTeacherEmail').value = currentUser.email;
                
                // Remplir les matières
                const editSubjectsContainer = document.getElementById('editTeacherSubjects');
                editSubjectsContainer.innerHTML = '';
                currentUser.subjects.forEach(subject => {
                    const tag = document.createElement('div');
                    tag.className = 'tag';
                    tag.innerHTML = `
                        ${subject}
                        <span class="tag-remove" onclick="this.parentElement.remove()">
                            <i class="fas fa-times"></i>
                        </span>
                    `;
                    editSubjectsContainer.appendChild(tag);
                });
                
                // Remplir les diplômes
                const editDegreesContainer = document.getElementById('editTeacherDegrees');
                editDegreesContainer.innerHTML = '';
                currentUser.degrees.forEach(degree => {
                    const tag = document.createElement('div');
                    tag.className = 'tag';
                    tag.innerHTML = `
                        ${degree}
                        <span class="tag-remove" onclick="this.parentElement.remove()">
                            <i class="fas fa-times"></i>
                        </span>
                    `;
                    editDegreesContainer.appendChild(tag);
                });
                
                document.getElementById('editTeacherCity').value = currentUser.city;
                document.getElementById('editTeacherExperience').value = currentUser.experience;
                document.getElementById('editTeacherRate').value = currentUser.rate;
                document.getElementById('editTeacherBio').value = currentUser.bio;
            }
        }

        // Fonction pour mettre à jour le profil de l'enseignant
        function updateTeacherProfile() {
            if (!currentUser) return;
            
            const name = document.getElementById('editTeacherName').value;
            const email = document.getElementById('editTeacherEmail').value;
            const city = document.getElementById('editTeacherCity').value;
            const experience = document.getElementById('editTeacherExperience').value;
            const rate = document.getElementById('editTeacherRate').value;
            const bio = document.getElementById('editTeacherBio').value;
            
            // Récupérer les matières et diplômes
            const subjects = Array.from(document.getElementById('editTeacherSubjects').querySelectorAll('.tag'))
                .map(tag => tag.textContent.replace('×', '').trim());
                
            const degrees = Array.from(document.getElementById('editTeacherDegrees').querySelectorAll('.tag'))
                .map(tag => tag.textContent.replace('×', '').trim());
            
            // Validation basique
            if (!name || !email || !city || !experience || !rate || !bio || subjects.length === 0) {
                alert('Veuillez remplir tous les champs obligatoires.');
                return;
            }
            
            // Mettre à jour l'utilisateur courant
            currentUser.name = name;
            currentUser.email = email;
            currentUser.subjects = subjects;
            currentUser.subject = subjects[0]; // Première matière comme sujet principal
            currentUser.degrees = degrees;
            currentUser.city = city;
            currentUser.experience = parseInt(experience);
            currentUser.rate = parseInt(rate);
            currentUser.bio = bio;
            currentUser.photo = document.getElementById('editTeacherPhotoPreview').src;
            
            // Mettre à jour dans la liste des enseignants
            const index = teachers.findIndex(t => t.id === currentUser.id);
            if (index !== -1) {
                teachers[index] = currentUser;
            }
            
            // Mettre à jour l'affichage des enseignants
            renderTeachers(teachers);
            
            // Mettre à jour l'affichage du profil
            showProfile();
            
            // Revenir à l'onglet d'informations
            showProfileTab('profile-info');
            
            alert('Profil mis à jour avec succès !');
        }

        // Fonctions pour gérer l'édition des matières et diplômes
        function addEditSubject() {
            const subjectInput = document.getElementById('editNewSubject');
            const subject = subjectInput.value.trim();
            
            if (subject) {
                const tagsContainer = document.getElementById('editTeacherSubjects');
                const tag = document.createElement('div');
                tag.className = 'tag';
                tag.innerHTML = `
                    ${subject}
                    <span class="tag-remove" onclick="this.parentElement.remove()">
                        <i class="fas fa-times"></i>
                    </span>
                `;
                tagsContainer.appendChild(tag);
                subjectInput.value = '';
            }
        }

        function addEditDegree() {
            const degreeInput = document.getElementById('editNewDegree');
            const degree = degreeInput.value.trim();
            
            if (degree) {
                const tagsContainer = document.getElementById('editTeacherDegrees');
                const tag = document.createElement('div');
                tag.className = 'tag';
                tag.innerHTML = `
                    ${degree}
                    <span class="tag-remove" onclick="this.parentElement.remove()">
                        <i class="fas fa-times"></i>
                    </span>
                `;
                tagsContainer.appendChild(tag);
                degreeInput.value = '';
            }
        }

        // Fonction pour prévisualiser la photo d'édition
        function previewEditTeacherPhoto(event) {
            const reader = new FileReader();
            reader.onload = function() {
                const output = document.getElementById('editTeacherPhotoPreview');
                output.src = reader.result;
            };
            reader.readAsDataURL(event.target.files[0]);
        }

        // Fonction pour se connecter
        function login() {
            const email = document.getElementById('loginEmail').value;
            const password = document.getElementById('loginPassword').value;
            
            if (!email || !password) {
                alert('Veuillez entrer votre email et mot de passe.');
                return;
            }
            
            // Rechercher l'utilisateur
            const user = teachers.find(t => t.email === email && t.password === password);
            
            if (user) {
                currentUser = user;
                
                document.getElementById('loginNavItem').style.display = 'none';
                document.getElementById('profileNavItem').style.display = 'list-item';
                document.getElementById('logoutNavItem').style.display = 'list-item';
                
                closeLoginModal();
                showProfile();
            } else {
                alert('Email ou mot de passe incorrect.');
            }
        }

        // Fonction pour se déconnecter
        function logout() {
            currentUser = null;
            
            document.getElementById('loginNavItem').style.display = 'list-item';
            document.getElementById('profileNavItem').style.display = 'none';
            document.getElementById('logoutNavItem').style.display = 'none';
            
            document.getElementById('profile').style.display = 'none';
            document.getElementById('registration').style.display = 'block';
            
            // Réinitialiser les formulaires de connexion
            document.getElementById('loginEmail').value = '';
            document.getElementById('loginPassword').value = '';
        }

        // Initialisation au chargement de la page
        document.addEventListener('DOMContentLoaded', function() {
            // Afficher les enseignants
            renderTeachers(teachers);
            
            // Remplir les listes déroulantes des villes
            populateCityDropdowns();
            
            // Configurer la validation des mots de passe
            document.getElementById('teacherPassword').addEventListener('input', function() {
                validatePassword(this.value);
            });
            
            document.getElementById('parentPassword').addEventListener('input', function() {
                validatePassword(this.value, 'parent');
            });
            
            // Animation des statistiques
            animateValue('teacherCount', 0, 20025, 2000);
            animateValue('parentCount', 0, 45120, 2000);
            animateValue('studentCount', 0, 78356, 2000);
        });

        // ... (les autres fonctions restent les mêmes) ...
    </script>
</body>
</html>
